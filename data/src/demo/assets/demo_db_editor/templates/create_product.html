{% extends 'base.html' %}

{% block title %} New product | Demo DB Editor {% endblock %}

{% block content %}

<form method="post" enctype="multipart/form-data">

    <div class="form-group">
        <label for="input_name">Name</label>
        <input type="text" class="form-control" id="input_name" name="name" placeholder="Product name"/>
    </div>

    <div class="form-group">
        <label class="form-label" for="image">Preview</label>
        <input class="form-control" type="file" id="image" name="image" accept="image/*" value="{{ request.form['image'] }}" onchange="updatePreview()"/>
        <img id="preview" src="" height="200"/>
    </div>

    <div class="form-group">
        <select class="form-control" name="category_id">
            <option value="">select category...</option>
            {% for category in categories %}
                <option value="{{ category['id'] }}">{{ category['name'] }}</option>
            {% endfor %}
            <!-- TODO: add option to create new category -->
        </select>
    </div>

    <div class="form-group">
        <label for="input_price">Price</label>
        <input type="text" class="form-control" id="input_price" name="price" placeholder="Product price"/>
    </div>

    <div class="form-group">
        <label for="input_price_with_discount">Price with discount</label>
        <input type="text" class="form-control" id="input_price_with_discount" name="price_with_discount" placeholder="Product price with discount"/>
    </div>

    <div class="form-group">
        <label for="input_rating">Rating</label>
        <input type="text" class="form-control" id="input_rating" name="rating" placeholder="Enter rating (from 0 to 5)"/>
    </div>

    <div class="form-group">
        <h2>Items</h2>
        <button type="button" class="btn-secondary" onclick="addProductItem({{ colorsJson }})">Add</button>
        <table class="table table-bordered" id="table_items"></table>
    </div>

    <button type="submit" class="btn btn-primary">Submit</button>
</form>
{% endblock %}

{% block scripts %}
<script>
    function updatePreview() {
        preview.src = URL.createObjectURL(event.target.files[0]);
    }
</script>
<script src="/static/js/scripts.js"></script>
{% endblock %}